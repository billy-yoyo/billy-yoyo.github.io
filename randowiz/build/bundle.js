var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function r(t){t.parentNode&&t.parentNode.removeChild(t)}function a(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function p(){return f("")}function g(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e){t.value=null==e?"":e}let b;function $(t){b=t}function y(){const t=function(){if(!b)throw new Error("Function called outside component initialization");return b}();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const o=function(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,l,e),s}(e,n,{cancelable:l});return s.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}const k=[],x=[],S=[],C=[],j=Promise.resolve();let O=!1;function w(t){S.push(t)}const M=new Set;let _=0;function E(){const t=b;do{for(;_<k.length;){const t=k[_];_++,$(t),N(t.$$)}for($(null),k.length=0,_=0;x.length;)x.pop()();for(let t=0;t<S.length;t+=1){const e=S[t];M.has(e)||(M.add(e),e())}S.length=0}while(k.length);for(;C.length;)C.pop()();O=!1,M.clear(),$(t)}function N(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(w)}}const L=new Set;let q;function A(){q={r:0,c:[],p:q}}function B(){q.r||l(q.c),q=q.p}function I(t,e){t&&t.i&&(L.delete(t),t.i(e))}function P(t,e,n,l){if(t&&t.o){if(L.has(t))return;L.add(t),q.c.push((()=>{L.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}else l&&l()}function D(t,e){t.d(1),e.delete(t.key)}function F(t,e){P(t,1,1,(()=>{e.delete(t.key)}))}function J(t,e,n,l,s,o,c,i,r,a,u,f){let d=t.length,p=o.length,g=d;const h={};for(;g--;)h[t[g].key]=g;const m=[],v=new Map,b=new Map;for(g=p;g--;){const t=f(s,o,g),i=n(t);let r=c.get(i);r?l&&r.p(t,e):(r=a(i,t),r.c()),v.set(i,m[g]=r),i in h&&b.set(i,Math.abs(g-h[i]))}const $=new Set,y=new Set;function k(t){I(t,1),t.m(i,u),c.set(t.key,t),u=t.first,p--}for(;d&&p;){const e=m[p-1],n=t[d-1],l=e.key,s=n.key;e===n?(u=e.first,d--,p--):v.has(s)?!c.has(l)||$.has(l)?k(e):y.has(s)?d--:b.get(l)>b.get(s)?(y.add(l),k(e)):($.add(s),d--):(r(n,c),d--)}for(;d--;){const e=t[d];v.has(e.key)||r(e,c)}for(;p;)k(m[p-1]);return m}function R(t){t&&t.c()}function T(t,n,o,c){const{fragment:i,after_update:r}=t.$$;i&&i.m(n,o),c||w((()=>{const n=t.$$.on_mount.map(e).filter(s);t.$$.on_destroy?t.$$.on_destroy.push(...n):l(n),t.$$.on_mount=[]})),r.forEach(w)}function z(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function U(t,e){-1===t.$$.dirty[0]&&(k.push(t),O||(O=!0,j.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function G(e,s,o,c,i,a,u,f=[-1]){const d=b;$(e);const p=e.$$={fragment:null,ctx:[],props:a,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:s.target||d.$$.root};u&&u(p.root);let g=!1;if(p.ctx=o?o(e,s.props||{},((t,n,...l)=>{const s=l.length?l[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=s)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](s),g&&U(e,t)),n})):[],p.update(),g=!0,l(p.before_update),p.fragment=!!c&&c(p.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);p.fragment&&p.fragment.l(t),t.forEach(r)}else p.fragment&&p.fragment.c();s.intro&&I(e.$$.fragment),T(e,s.target,s.anchor,s.customElement),E()}$(d)}class H{$destroy(){z(this,1),this.$destroy=t}$on(e,n){if(!s(n))return t;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const t=l.indexOf(n);-1!==t&&l.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function K(t){let e,n,s,o,a,f,p,m,v;return{c(){e=u("div"),n=u("label"),n.textContent="Spell Name",s=d(),o=u("input"),f=d(),p=u("button"),p.textContent="Delete",h(n,"for","name-input"),h(o,"id","name-input"),h(o,"type","text"),o.value=a=t[0].name,h(e,"class","footer svelte-vxj1vb")},m(l,r){i(l,e,r),c(e,n),c(e,s),c(e,o),c(e,f),c(e,p),m||(v=[g(o,"change",t[3]),g(p,"click",t[4])],m=!0)},p(t,e){1&e&&a!==(a=t[0].name)&&o.value!==a&&(o.value=a)},d(t){t&&r(e),m=!1,l(v)}}}function Q(e){let n,l,s,o,a,p,v,b=e[0].name+"",$=e[1]&&K(e);return{c(){n=u("div"),l=u("div"),s=u("div"),o=f(b),a=d(),$&&$.c(),h(s,"class","title svelte-vxj1vb"),h(l,"class","header svelte-vxj1vb"),h(n,"class","spell svelte-vxj1vb")},m(t,r){i(t,n,r),c(n,l),c(l,s),c(s,o),c(n,a),$&&$.m(n,null),p||(v=g(l,"click",e[2]),p=!0)},p(t,[e]){1&e&&b!==(b=t[0].name+"")&&m(o,b),t[1]?$?$.p(t,e):($=K(t),$.c(),$.m(n,null)):$&&($.d(1),$=null)},i:t,o:t,d(t){t&&r(n),$&&$.d(),p=!1,v()}}}function V(t,e,n){let{category:l}=e,s=!1;const o=y();return t.$$set=t=>{"category"in t&&n(0,l=t.category)},[l,s,()=>{n(1,s=!s)},t=>{n(0,l=Object.assign(Object.assign({},l),{name:t.target.value})),o("change",l)},()=>{o("delete")}]}class W extends H{constructor(t){super(),G(this,t,V,Q,o,{category:0})}}function X(t,e,n){const l=t.slice();return l[10]=e[n],l}function Y(t){let e,n,s,o,f,p,m,v,b,$,y,k,x,S,C,j,O,w=t[1],M=[];for(let e=0;e<w.length;e+=1)M[e]=Z(X(t,w,e));return{c(){e=u("div"),n=u("label"),n.textContent="Spell Name",s=d(),o=u("input"),p=d(),m=u("label"),m.textContent="Spell Slot",v=d(),b=u("input"),y=d();for(let t=0;t<M.length;t+=1)M[t].c();k=d(),x=u("button"),x.textContent="Delete",S=d(),C=u("button"),C.textContent="Learn",h(n,"for","name-input"),h(o,"id","name-input"),h(o,"type","text"),o.value=f=t[0].name,h(m,"for","spell-slot-input"),h(b,"id","spell-slot-input"),h(b,"type","number"),b.value=$=t[0].slot,h(e,"class","footer svelte-1exc61s")},m(l,r){i(l,e,r),c(e,n),c(e,s),c(e,o),c(e,p),c(e,m),c(e,v),c(e,b),c(e,y);for(let t=0;t<M.length;t+=1)M[t].m(e,null);c(e,k),c(e,x),c(e,S),c(e,C),j||(O=[g(o,"change",t[5]),g(b,"change",t[4]),g(x,"click",t[7]),g(C,"click",t[8])],j=!0)},p(t,n){if(1&n&&f!==(f=t[0].name)&&o.value!==f&&(o.value=f),1&n&&$!==($=t[0].slot)&&b.value!==$&&(b.value=$),67&n){let l;for(w=t[1],l=0;l<w.length;l+=1){const s=X(t,w,l);M[l]?M[l].p(s,n):(M[l]=Z(s),M[l].c(),M[l].m(e,k))}for(;l<M.length;l+=1)M[l].d(1);M.length=w.length}},d(t){t&&r(e),a(M,t),j=!1,l(O)}}}function Z(t){let e,n,l,o,a,p,v,b,$,y,k=t[10].name+"";return{c(){e=u("div"),n=u("input"),a=d(),p=u("label"),v=f(k),h(n,"id",l="checkbox-"+t[10].id),h(n,"type","checkbox"),n.checked=o=t[0].categories.includes(t[10].id),h(n,"class","svelte-1exc61s"),h(p,"for",b="checkbox-"+t[10].id),h(p,"class","svelte-1exc61s"),h(e,"class","checkbox svelte-1exc61s")},m(l,o){i(l,e,o),c(e,n),c(e,a),c(e,p),c(p,v),$||(y=g(n,"change",(function(){s(t[6](t[10].id))&&t[6](t[10].id).apply(this,arguments)})),$=!0)},p(e,s){t=e,2&s&&l!==(l="checkbox-"+t[10].id)&&h(n,"id",l),3&s&&o!==(o=t[0].categories.includes(t[10].id))&&(n.checked=o),2&s&&k!==(k=t[10].name+"")&&m(v,k),2&s&&b!==(b="checkbox-"+t[10].id)&&h(p,"for",b)},d(t){t&&r(e),$=!1,y()}}}function tt(e){let n,l,s,o,a,p,v,b,$,y,k=e[0].slot+"",x=e[0].name+"",S=e[2]&&Y(e);return{c(){n=u("div"),l=u("div"),s=u("div"),o=f(k),a=d(),p=u("div"),v=f(x),b=d(),S&&S.c(),h(s,"class","spell-slot svelte-1exc61s"),h(p,"class","title svelte-1exc61s"),h(l,"class","header svelte-1exc61s"),h(n,"class","spell svelte-1exc61s")},m(t,r){i(t,n,r),c(n,l),c(l,s),c(s,o),c(l,a),c(l,p),c(p,v),c(n,b),S&&S.m(n,null),$||(y=g(l,"click",e[3]),$=!0)},p(t,[e]){1&e&&k!==(k=t[0].slot+"")&&m(o,k),1&e&&x!==(x=t[0].name+"")&&m(v,x),t[2]?S?S.p(t,e):(S=Y(t),S.c(),S.m(n,null)):S&&(S.d(1),S=null)},i:t,o:t,d(t){t&&r(n),S&&S.d(),$=!1,y()}}}function et(t,e,n){let{spell:l}=e,{categories:s}=e,o=!1;const c=y();return t.$$set=t=>{"spell"in t&&n(0,l=t.spell),"categories"in t&&n(1,s=t.categories)},[l,s,o,()=>{n(2,o=!o)},t=>{n(0,l=Object.assign(Object.assign({},l),{slot:parseInt(t.target.value)})),c("change",l)},t=>{n(0,l=Object.assign(Object.assign({},l),{name:t.target.value})),c("change",l)},t=>e=>{let s=l.categories.slice();e.target.checked&&!s.includes(t)?s.push(t):!e.target.checked&&s.includes(t)&&s.splice(s.indexOf(t),1),n(0,l=Object.assign(Object.assign({},l),{categories:s})),c("change",l)},()=>{c("delete")},()=>{c("learn")}]}class nt extends H{constructor(t){super(),G(this,t,et,tt,o,{spell:0,categories:1})}}function lt(t,e,n){const l=t.slice();return l[6]=e[n],l}function st(e){let n;return{c(){n=f("Not enough spell slots")},m(t,e){i(t,n,e)},p:t,d(t){t&&r(n)}}}function ot(t){let e,n,l,s=t[1],o=[];for(let e=0;e<s.length;e+=1)o[e]=ct(lt(t,s,e));return{c(){e=u("div"),e.textContent="Cast spell at level:",n=d();for(let t=0;t<o.length;t+=1)o[t].c();l=p(),h(e,"class","text")},m(t,s){i(t,e,s),i(t,n,s);for(let e=0;e<o.length;e+=1)o[e].m(t,s);i(t,l,s)},p(t,e){if(6&e){let n;for(s=t[1],n=0;n<s.length;n+=1){const c=lt(t,s,n);o[n]?o[n].p(c,e):(o[n]=ct(c),o[n].c(),o[n].m(l.parentNode,l))}for(;n<o.length;n+=1)o[n].d(1);o.length=s.length}},d(t){t&&r(e),t&&r(n),a(o,t),t&&r(l)}}}function ct(t){let e,n,l,o,a=(0===t[6]?"Cantrip":t[6])+"";return{c(){e=u("button"),n=f(a),h(e,"class","svelte-1fn5qed")},m(r,a){i(r,e,a),c(e,n),l||(o=g(e,"click",(function(){s(t[2](t[6]))&&t[2](t[6]).apply(this,arguments)})),l=!0)},p(e,l){t=e,2&l&&a!==(a=(0===t[6]?"Cantrip":t[6])+"")&&m(n,a)},d(t){t&&r(e),l=!1,o()}}}function it(e){let n,l,s,o,a,p,v,b,$,y,k=e[0].name+"";function x(t,e){return t[1].length>0?ot:st}let S=x(e),C=S(e);return{c(){n=u("div"),l=u("div"),s=f(k),o=d(),a=u("div"),C.c(),p=d(),v=u("div"),b=u("button"),b.textContent="Forget Spell",h(l,"class","header svelte-1fn5qed"),h(a,"class","subheader svelte-1fn5qed"),h(b,"class","svelte-1fn5qed"),h(v,"class","footer"),h(n,"class","spell svelte-1fn5qed")},m(t,r){i(t,n,r),c(n,l),c(l,s),c(n,o),c(n,a),C.m(a,null),c(n,p),c(n,v),c(v,b),$||(y=g(b,"click",e[3]),$=!0)},p(t,[e]){1&e&&k!==(k=t[0].name+"")&&m(s,k),S===(S=x(t))&&C?C.p(t,e):(C.d(1),C=S(t),C&&(C.c(),C.m(a,null)))},i:t,o:t,d(t){t&&r(n),C.d(),$=!1,y()}}}function rt(t,e,n){let l,{spell:s}=e,{slotCur:o}=e;const c=y();return t.$$set=t=>{"spell"in t&&n(0,s=t.spell),"slotCur"in t&&n(4,o=t.slotCur)},t.$$.update=()=>{17&t.$$.dirty&&n(1,l=o.map(((t,e)=>[t,e])).filter((([t,e])=>(0===e||t>0)&&e>=s.slot)).map((([t,e])=>e)))},[s,l,t=>()=>{c("use",{spell:s,slot:t})},()=>{c("forget",s)},o]}class at extends H{constructor(t){super(),G(this,t,rt,it,o,{spell:0,slotCur:4})}}function ut(t,e,n){const l=t.slice();return l[21]=e[n],l}function ft(t,e,n){const l=t.slice();return l[24]=e[n],l[26]=n,l}function dt(t,e,n){const l=t.slice();return l[27]=e[n],l}function pt(t,e,n){const l=t.slice();return l[21]=e[n],l}function gt(t,e,n){const l=t.slice();return l[27]=e[n],l}function ht(t,e){let n,l,o;return l=new nt({props:{spell:e[27],categories:e[0].categories}}),l.$on("change",e[4]),l.$on("delete",(function(){s(e[5](e[27].id))&&e[5](e[27].id).apply(this,arguments)})),l.$on("learn",(function(){s(e[13](e[27]))&&e[13](e[27]).apply(this,arguments)})),{key:t,first:null,c(){n=p(),R(l.$$.fragment),this.first=n},m(t,e){i(t,n,e),T(l,t,e),o=!0},p(t,n){e=t;const s={};1&n[0]&&(s.spell=e[27]),1&n[0]&&(s.categories=e[0].categories),l.$set(s)},i(t){o||(I(l.$$.fragment,t),o=!0)},o(t){P(l.$$.fragment,t),o=!1},d(t){t&&r(n),z(l,t)}}}function mt(t,e){let n,l,o,a,d=e[21].name+"";return{key:t,first:null,c(){n=u("button"),l=f(d),h(n,"class","svelte-l4tk0y"),this.first=n},m(t,r){i(t,n,r),c(n,l),o||(a=g(n,"click",(function(){s(e[17](e[21].id))&&e[17](e[21].id).apply(this,arguments)})),o=!0)},p(t,n){e=t,1&n[0]&&d!==(d=e[21].name+"")&&m(l,d)},d(t){t&&r(n),o=!1,a()}}}function vt(t){let e,n,s,o,a,p,m,v,b,$,y,k,x;return{c(){e=u("span"),n=f("Level "),s=f(t[26]),o=f(" spells:"),a=d(),p=u("input"),v=f("\n\t\t\t\t\t\t\tof\n\t\t\t\t\t\t\t"),b=u("input"),y=f("\n\t\t\t\t\t\t\tslots available."),h(p,"type","number"),p.value=m=t[0].slotCur[t[26]],h(p,"class","svelte-l4tk0y"),h(b,"type","number"),b.value=$=t[24],h(b,"class","svelte-l4tk0y")},m(l,r){i(l,e,r),c(e,n),c(e,s),c(e,o),i(l,a,r),i(l,p,r),i(l,v,r),i(l,b,r),i(l,y,r),k||(x=[g(p,"change",t[11](t[26])),g(b,"change",t[12](t[26]))],k=!0)},p(e,n){t=e,1&n[0]&&m!==(m=t[0].slotCur[t[26]])&&p.value!==m&&(p.value=m),1&n[0]&&$!==($=t[24])&&b.value!==$&&(b.value=$)},d(t){t&&r(e),t&&r(a),t&&r(p),t&&r(v),t&&r(b),t&&r(y),k=!1,l(x)}}}function bt(e){let n;return{c(){n=f("Cantrip spells:")},m(t,e){i(t,n,e)},p:t,d(t){t&&r(n)}}}function $t(t){let e,n;return e=new at({props:{spell:t[27],slotCur:t[0].slotCur}}),e.$on("use",(function(){s(t[10](t[27].id))&&t[10](t[27].id).apply(this,arguments)})),e.$on("forget",t[14]),{c(){R(e.$$.fragment)},m(t,l){T(e,t,l),n=!0},p(n,l){t=n;const s={};8&l[0]&&(s.spell=t[27]),1&l[0]&&(s.slotCur=t[0].slotCur),e.$set(s)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function yt(t,e){let n,l,s,o=(!e[1]||e[27].name.toLowerCase().replace("s","").includes(e[1].toLowerCase().replace("s","")))&&(0===e[2].length||e[2].includes(e[27].id)),c=o&&$t(e);return{key:t,first:null,c(){n=p(),c&&c.c(),l=p(),this.first=n},m(t,e){i(t,n,e),c&&c.m(t,e),i(t,l,e),s=!0},p(t,n){e=t,14&n[0]&&(o=(!e[1]||e[27].name.toLowerCase().replace("s","").includes(e[1].toLowerCase().replace("s","")))&&(0===e[2].length||e[2].includes(e[27].id))),o?c?(c.p(e,n),14&n[0]&&I(c,1)):(c=$t(e),c.c(),I(c,1),c.m(l.parentNode,l)):c&&(A(),P(c,1,1,(()=>{c=null})),B())},i(t){s||(I(c),s=!0)},o(t){P(c),s=!1},d(t){t&&r(n),c&&c.d(t),t&&r(l)}}}function kt(t){let e,n,l,s,o,a,f=[],p=new Map;let g=function(t,e){return 0===t[26]?bt:vt}(t),m=g(t),v=t[3][t[26]];const b=t=>t[27].id;for(let e=0;e<v.length;e+=1){let n=dt(t,v,e),l=b(n);p.set(l,f[e]=yt(l,n))}return{c(){e=u("div"),n=u("div"),m.c(),l=d(),s=u("div");for(let t=0;t<f.length;t+=1)f[t].c();o=d(),h(n,"class","slot-header svelte-l4tk0y"),h(s,"class","slot-spells svelte-l4tk0y"),h(e,"class","slot-list svelte-l4tk0y")},m(t,r){i(t,e,r),c(e,n),m.m(n,null),c(e,l),c(e,s);for(let t=0;t<f.length;t+=1)f[t].m(s,null);c(e,o),a=!0},p(t,e){m.p(t,e),17423&e[0]&&(v=t[3][t[26]],A(),f=J(f,e,b,1,t,v,p,s,F,yt,null,dt),B())},i(t){if(!a){for(let t=0;t<v.length;t+=1)I(f[t]);a=!0}},o(t){for(let t=0;t<f.length;t+=1)P(f[t]);a=!1},d(t){t&&r(e),m.d();for(let t=0;t<f.length;t+=1)f[t].d()}}}function xt(t){let e,n;return e=new W({props:{category:t[21]}}),e.$on("change",t[7]),e.$on("delete",(function(){s(t[8](t[21].id))&&t[8](t[21].id).apply(this,arguments)})),{c(){R(e.$$.fragment)},m(t,l){T(e,t,l),n=!0},p(n,l){t=n;const s={};1&l[0]&&(s.category=t[21]),e.$set(s)},i(t){n||(I(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function St(t){let e,n,s,o,f,p,m,b,$,y,k,x,S,C,j,O,w,M,_,E,N,L,q,R,T,z,U,G,H,K=[],Q=new Map,V=[],W=new Map,X=t[0].allSpells;const Y=t=>t[27].id;for(let e=0;e<X.length;e+=1){let n=gt(t,X,e),l=Y(n);Q.set(l,K[e]=ht(l,n))}let Z=t[0].categories;const tt=t=>t[21].id;for(let e=0;e<Z.length;e+=1){let n=pt(t,Z,e),l=tt(n);W.set(l,V[e]=mt(l,n))}let et=t[0].slotMax,nt=[];for(let e=0;e<et.length;e+=1)nt[e]=kt(ft(t,et,e));const lt=t=>P(nt[t],1,1,(()=>{nt[t]=null}));let st=t[0].categories,ot=[];for(let e=0;e<st.length;e+=1)ot[e]=xt(ut(t,st,e));const ct=t=>P(ot[t],1,1,(()=>{ot[t]=null}));return{c(){e=u("div"),n=u("div");for(let t=0;t<K.length;t+=1)K[t].c();s=d(),o=u("button"),o.textContent="Add Spell",f=d(),p=u("div"),m=u("div"),b=u("div"),$=u("button"),$.textContent="Long Rest",y=d(),k=u("button"),k.textContent="Learn Random Spell",x=d(),S=u("input"),C=d(),j=u("div"),j.textContent="Pick a category to cast:",O=d(),w=u("div");for(let t=0;t<V.length;t+=1)V[t].c();M=d(),_=u("div"),E=u("button"),E.textContent="Undo Category Selection",N=d(),L=u("div");for(let t=0;t<nt.length;t+=1)nt[t].c();q=d(),R=u("div");for(let t=0;t<ot.length;t+=1)ot[t].c();T=d(),z=u("button"),z.textContent="Add Category",h(n,"class","left svelte-l4tk0y"),h($,"class","svelte-l4tk0y"),h(k,"class","svelte-l4tk0y"),h(S,"type","text"),h(b,"class","row"),h(j,"class","row"),h(w,"class","row"),h(E,"class","svelte-l4tk0y"),h(_,"class","row"),h(m,"class","middle-header svelte-l4tk0y"),h(L,"class","middle-content"),h(p,"class","middle svelte-l4tk0y"),h(R,"class","right svelte-l4tk0y"),h(e,"class","main svelte-l4tk0y")},m(l,r){i(l,e,r),c(e,n);for(let t=0;t<K.length;t+=1)K[t].m(n,null);c(n,s),c(n,o),c(e,f),c(e,p),c(p,m),c(m,b),c(b,$),c(b,y),c(b,k),c(b,x),c(b,S),v(S,t[1]),c(m,C),c(m,j),c(m,O),c(m,w);for(let t=0;t<V.length;t+=1)V[t].m(w,null);c(m,M),c(m,_),c(_,E),c(p,N),c(p,L);for(let t=0;t<nt.length;t+=1)nt[t].m(L,null);c(e,q),c(e,R);for(let t=0;t<ot.length;t+=1)ot[t].m(R,null);c(R,T),c(R,z),U=!0,G||(H=[g(o,"click",t[6]),g($,"click",t[16]),g(k,"click",t[15]),g(S,"input",t[19]),g(E,"click",t[18]),g(z,"click",t[9])],G=!0)},p(t,e){if(8241&e[0]&&(X=t[0].allSpells,A(),K=J(K,e,Y,1,t,X,Q,n,F,ht,s,gt),B()),2&e[0]&&S.value!==t[1]&&v(S,t[1]),131073&e[0]&&(Z=t[0].categories,V=J(V,e,tt,1,t,Z,W,w,D,mt,null,pt)),23567&e[0]){let n;for(et=t[0].slotMax,n=0;n<et.length;n+=1){const l=ft(t,et,n);nt[n]?(nt[n].p(l,e),I(nt[n],1)):(nt[n]=kt(l),nt[n].c(),I(nt[n],1),nt[n].m(L,null))}for(A(),n=et.length;n<nt.length;n+=1)lt(n);B()}if(385&e[0]){let n;for(st=t[0].categories,n=0;n<st.length;n+=1){const l=ut(t,st,n);ot[n]?(ot[n].p(l,e),I(ot[n],1)):(ot[n]=xt(l),ot[n].c(),I(ot[n],1),ot[n].m(R,T))}for(A(),n=st.length;n<ot.length;n+=1)ct(n);B()}},i(t){if(!U){for(let t=0;t<X.length;t+=1)I(K[t]);for(let t=0;t<et.length;t+=1)I(nt[t]);for(let t=0;t<st.length;t+=1)I(ot[t]);U=!0}},o(t){for(let t=0;t<K.length;t+=1)P(K[t]);nt=nt.filter(Boolean);for(let t=0;t<nt.length;t+=1)P(nt[t]);ot=ot.filter(Boolean);for(let t=0;t<ot.length;t+=1)P(ot[t]);U=!1},d(t){t&&r(e);for(let t=0;t<K.length;t+=1)K[t].d();for(let t=0;t<V.length;t+=1)V[t].d();a(nt,t),a(ot,t),G=!1,l(H)}}}function Ct(t,e,n){let l,{state:s}=e,o="",c=[];const i=t=>{localStorage.setItem("state",JSON.stringify(t)),n(0,s=t),console.log(t)};return t.$$set=t=>{"state"in t&&n(0,s=t.state)},t.$$.update=()=>{1&t.$$.dirty[0]&&n(3,l=s.slotMax.map(((t,e)=>s.knownSpells.map((t=>s.allSpells.find((e=>e.id===t)))).filter((t=>t.slot===e)))))},[s,o,c,l,t=>{const e=t.detail;i(Object.assign(Object.assign({},s),{allSpells:s.allSpells.map((t=>t.id===e.id?e:t))}))},t=>e=>{i(Object.assign(Object.assign({},s),{allSpells:s.allSpells.filter((e=>e.id!==t)),knownSpells:s.knownSpells.filter((e=>e!==t))}))},()=>{const t=s.allSpells.map((t=>t.id)).sort().pop();i(Object.assign(Object.assign({},s),{allSpells:s.allSpells.concat([{id:void 0===t?0:t+1,name:"Spell",slot:0,categories:[]}])}))},t=>{const e=t.detail;i(Object.assign(Object.assign({},s),{categories:s.categories.map((t=>t.id===e.id?e:t))}))},t=>()=>{i(Object.assign(Object.assign({},s),{categories:s.categories.filter((e=>e.id!==t)),allSpells:s.allSpells.map((e=>Object.assign(Object.assign({},e),{categories:e.categories.filter((e=>e!==t))})))}))},()=>{const t=s.categories.map((t=>t.id)).sort().pop();i(Object.assign(Object.assign({},s),{categories:s.categories.concat([{id:void 0===t?0:t+1,name:"Category"}])}))},t=>()=>{},t=>e=>{i(Object.assign(Object.assign({},s),{slotCur:s.slotCur.map(((n,l)=>l===t?e.target.value:n))}))},t=>e=>{i(Object.assign(Object.assign({},s),{slotMax:s.slotMax.map(((n,l)=>l===t?e.target.value:n))}))},t=>()=>{s.knownSpells.includes(t.id)||i(Object.assign(Object.assign({},s),{knownSpells:s.knownSpells.concat([t.id])}))},t=>{const e=t.detail;i(Object.assign(Object.assign({},s),{knownSpells:s.knownSpells.filter((t=>t!==e.id))}))},()=>{const t=s.slotMax.map(((t,e)=>[t,e])).filter((([t,e])=>t>0)),e=t.length>0?t.pop()[1]:0,n=s.allSpells.filter((t=>t.slot<=e&&!s.knownSpells.includes(t.id)));if(n.length>0){const t=n[Math.floor(Math.random()*n.length)];i(Object.assign(Object.assign({},s),{knownSpells:s.knownSpells.concat([t.id])}))}},()=>{i(Object.assign(Object.assign({},s),{slotCur:s.slotMax.slice()}))},t=>()=>{const e=s.knownSpells.map((t=>s.allSpells.find((e=>e.id===t)))).filter((t=>0===t.slot||s.slotCur.some(((e,n)=>n>=t.slot&&e>0)))).filter((e=>e.categories.includes(t))).map((t=>t.id));if(e.length<=2)n(2,c=e);else{const t=Math.floor(Math.random()*e.length);let l=t;for(;l===t;)l=Math.floor(Math.random()*e.length);n(2,c=[e[t],e[l]])}},()=>{n(2,c=[])},function(){o=this.value,n(1,o)}]}return new class extends H{constructor(t){super(),G(this,t,Ct,St,o,{state:0},null,[-1,-1])}}({target:document.body,props:{state:(()=>{const t=localStorage.getItem("state");return t?JSON.parse(t):{slotMax:[0,0,0,0,0,0,0,0],slotCur:[0,0,0,0,0,0,0,0],categories:[],allSpells:[],knownSpells:[]}})()}})}();
//# sourceMappingURL=bundle.js.map
